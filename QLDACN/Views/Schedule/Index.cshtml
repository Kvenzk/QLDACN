@model IEnumerable<QLDACN.Models.PickupSchedule>
@{
    ViewData["Title"] = "Đặt lịch thu gom";
}
<div class="px-4 md:px-8 lg:px-40 flex justify-center py-12">
    <div class="w-full max-w-[1280px] flex flex-col gap-10">
        <div class="flex items-center justify-between">
            <h1 class="text-2xl md:text-3xl font-bold text-text-main-light dark:text-text-main-dark">Lịch thu gom của bạn</h1>
            <a asp-action="Create" class="flex h-11 px-6 items-center justify-center rounded-xl bg-primary hover:bg-primary-dark text-white text-sm font-bold shadow-lg shadow-primary/30">Tạo lịch mới</a>
        </div>
        @{ var current = (string)(ViewData["StatusFilter"] ?? "all"); }
        <div class="flex items-center gap-2">
            <a asp-action="Index" asp-route-status="all" class="section-pill @(current=="all"?"filter-tab--active":"")">Tất cả</a>
            <a asp-action="Index" asp-route-status="approved" class="section-pill @(current=="approved"?"filter-tab--active":"")">Đã duyệt</a>
            <a asp-action="Index" asp-route-status="pending" class="section-pill @(current=="pending"?"filter-tab--active":"")">Đang chờ</a>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            @foreach (var s in Model)
            {
                <div class="schedule-card">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-10 rounded-full bg-primary text-white flex items-center justify-center">
                                <span class="material-symbols-outlined">event</span>
                            </div>
                            <div>
                                <p class="text-sm text-text-sec-light">Địa chỉ</p>
                                <p class="font-bold text-text-main-light dark:text-text-main-dark">@s.PickupAddress</p>
                            </div>
                        </div>
                        @{ var st = s.Status; var stText = st=="Pending"?"Đang chờ": st=="Approved"?"Đã duyệt": st; var stClass = st=="Pending"?"status-chip status-chip--pending": st=="Approved"?"status-chip status-chip--approved":"status-chip"; }
                        <span class="@stClass">@stText</span>
                    </div>
                    <div class="mt-5 grid grid-cols-2 gap-4">
                        <div class="rounded-xl border border-gray-200 dark:border-white/10 p-4 bg-surface-light dark:bg-surface-dark">
                            <p class="text-xs text-text-sec-light">Thời gian</p>
                            <p class="font-bold">@s.ScheduledDate.ToString("dd/MM/yyyy HH:mm")</p>
                        </div>
                        <div class="rounded-xl border border-gray-200 dark:border-white/10 p-4 bg-surface-light dark:bg-surface-dark">
                            <p class="text-xs text-text-sec-light">Ghi chú</p>
                            <p class="font-bold">@(string.IsNullOrWhiteSpace(s.Note) ? "—" : s.Note)</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
