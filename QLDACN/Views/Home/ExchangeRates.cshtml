@model IEnumerable<QLDACN.Models.WasteType>
@{
    ViewData["Title"] = "Tỉ lệ đổi";
    var groups = Model.GroupBy(x => x.Category).OrderBy(g => g.Key).ToList();
}
<div class="px-4 md:px-8 lg:px-40 flex justify-center py-12">
    <div class="w-full max-w-[1280px] flex flex-col gap-12">
        <div class="relative flex flex-col items-center text-center gap-4">
            <span class="section-pill">Tỉ lệ đổi điểm</span>
            <h1 class="text-text-main-light dark:text-text-main-dark text-3xl md:text-5xl font-extrabold leading-tight">
                Quy đổi vật liệu tái chế thành <span class="gradient-text">điểm thưởng</span>
            </h1>
            <p class="text-text-sec-light dark:text-text-sec-dark max-w-3xl">Các mức điểm áp dụng theo từng loại vật liệu. Thiết kế hiện đại, thân thiện, tạo cảm hứng cho hành trình tái chế.</p>
            <div class="absolute -left-20 -top-10 w-40 h-40 bg-primary/10 rounded-full blur-3xl"></div>
            <div class="absolute -right-24 -bottom-8 w-52 h-52 bg-accent-yellow/20 rounded-full blur-3xl"></div>
        </div>

        <div class="flex justify-center">
            <div class="flex flex-wrap items-center justify-center gap-3">
                @foreach (var g in groups)
                {
                    <a href={"#" + g.Key.Replace(" ", "").ToLower()} class="section-pill">@g.Key</a>
                }
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="content flex flex-col gap-4">
                @foreach (var g in groups.Where(x => x.Key.Contains("Nhựa")))
                {
                <div id="@g.Key.Replace(" ", "").ToLower()" class="rate-card">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-primary">recycling</span>
                        <h2 class="text-xl font-bold">@g.Key</h2>
                    </div>
                    <ul class="flex flex-col gap-3">
                        @foreach (var item in g.OrderBy(x => x.Name))
                        {
                            <li class="rate-row">
                                <div>
                                    <p class="font-medium">@item.Name</p>
                                    <p class="text-sm text-text-sec-light">@item.Description</p>
                                </div>
                                <span class="points-chip points-chip--solid">@item.PointPerUnit điểm/@item.Unit</span>
                            </li>
                        }
                    </ul>
                </div>
                }

                @foreach (var g in groups.Where(x => x.Key.Contains("Giấy")))
                {
                <div id="@g.Key.Replace(" ", "").ToLower()" class="rate-card">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-primary">description</span>
                        <h2 class="text-xl font-bold">@g.Key</h2>
                    </div>
                    <ul class="flex flex-col gap-3">
                        @foreach (var item in g.OrderBy(x => x.Name))
                        {
                            <li class="rate-row">
                                <div>
                                    <p class="font-medium">@item.Name</p>
                                    <p class="text-sm text-text-sec-light">@item.Description</p>
                                </div>
                                <span class="points-chip points-chip--solid">@item.PointPerUnit điểm/@item.Unit</span>
                            </li>
                        }
                    </ul>
                </div>
                }
            </div>

            <div class="flex flex-col gap-4">
                @foreach (var g in groups.Where(x => x.Key.Contains("Kim")))
                {
                <div id="@g.Key.Replace(" ", "").ToLower()" class="rate-card bg-background-light dark:bg-background-dark">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-primary">emoji_food_beverage</span>
                        <h2 class="text-xl font-bold">@g.Key</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        @foreach (var item in g)
                        {
                            <div class="rate-row rounded-xl p-4 bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/10">
                                <div>
                                    <p class="font-medium">@item.Name</p>
                                    <p class="text-sm text-text-sec-light">@item.Description</p>
                                </div>
                                <span class="points-chip points-chip--solid">@item.PointPerUnit điểm/@item.Unit</span>
                            </div>
                        }
                    </div>
                </div>
                }

                @foreach (var g in groups.Where(x => x.Key.Contains("Thủy")))
                {
                <div id="@g.Key.Replace(" ", "").ToLower()" class="rate-card bg-background-light dark:bg-background-dark">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-primary">wine_bar</span>
                        <h2 class="text-xl font-bold">@g.Key</h2>
                    </div>
                    @foreach (var item in g)
                    {
                        <div class="rate-row rounded-xl p-4 bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/10">
                            <div>
                                <p class="font-medium">@item.Name</p>
                                <p class="text-sm text-text-sec-light">@item.Description</p>
                            </div>
                            <span class="points-chip points-chip--solid">@item.PointPerUnit điểm/@item.Unit</span>
                        </div>
                    }
                </div>
                }

                @foreach (var g in groups.Where(x => x.Key.Contains("Khác")))
                {
                <div id="@g.Key.Replace(" ", "").ToLower()" class="rate-card bg-background-light dark:bg-background-dark">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-primary">category</span>
                        <h2 class="text-xl font-bold">@g.Key</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        @foreach (var item in g)
                        {
                            <div class="rate-row rounded-xl p-4 bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/10">
                                <div>
                                    <p class="font-medium">@item.Name</p>
                                    <p class="text-sm text-text-sec-light">@item.Description</p>
                                </div>
                                <span class="points-chip points-chip--solid">@item.PointPerUnit điểm/@item.Unit</span>
                            </div>
                        }
                    </div>
                </div>
                }
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="rounded-2xl p-6 bg-white dark:bg-surface-dark border border-gray-200 dark:border-white/10 shadow-sm">
                <h3 class="text-lg font-bold mb-3">Tích lũy mẫu A</h3>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="points-chip">PET 2kg</span>
                    <span class="points-chip">HDPE 1kg</span>
                    <span class="points-chip">Giấy VP 0.5kg</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-text-sec-light">Tổng điểm</span>
                    <span class="px-3 py-1 rounded-xl bg-primary text-white font-bold">180 điểm</span>
                </div>
            </div>
            <div class="rounded-2xl p-6 bg-white dark:bg-surface-dark border border-gray-200 dark:border-white/10 shadow-sm">
                <h3 class="text-lg font-bold mb-3">Tích lũy mẫu B</h3>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="points-chip">Lon nhôm 1kg</span>
                    <span class="points-chip">Carton 1kg</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-text-sec-light">Tổng điểm</span>
                    <span class="px-3 py-1 rounded-xl bg-primary text-white font-bold">120 điểm</span>
                </div>
            </div>
            <div class="rounded-2xl p-6 bg-white dark:bg-surface-dark border border-gray-200 dark:border-white/10 shadow-sm">
                <h3 class="text-lg font-bold mb-3">Tích lũy mẫu C</h3>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="points-chip">Túi nilon 0.5kg</span>
                    <span class="points-chip">Thủy tinh 1kg</span>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-text-sec-light">Tổng điểm</span>
                    <span class="px-3 py-1 rounded-xl bg-primary text-white font-bold">80 điểm</span>
                </div>
            </div>
        </div>
    </div>
</div>
